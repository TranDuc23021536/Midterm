<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ERC20 Token Manager</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="app-container">
      <!-- Sidebar -->
      <aside class="sidebar">
        <div class="logo">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10" />
            <path d="M12 6v6l4 2" />
          </svg>
          <span>Token Manager</span>
        </div>
        
        <nav class="nav-menu">
          <a href="#wallet" class="nav-item active">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="3" y="7" width="18" height="14" rx="2" />
              <path d="M16 12h.01M3 11h18" />
            </svg>
            <span>Wallet</span>
          </a>
          <a href="#token" class="nav-item">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="10" />
              <path d="M2 12h20M12 2a15.3 15.3 0 014 10 15.3 15.3 0 01-4 10 15.3 15.3 0 01-4-10 15.3 15.3 0 014-10z" />
            </svg>
            <span>Token</span>
          </a>
          <a href="#transfer" class="nav-item">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 12H3M21 12l-7-7M21 12l-7 7" />
            </svg>
            <span>Transfer</span>
          </a>
          <a href="#allowance" class="nav-item">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" />
            </svg>
            <span>Allowance</span>
          </a>
          <a href="#history" class="nav-item">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M3 3h18v18H3zM21 9H3M9 21V9" />
            </svg>
            <span>History</span>
          </a>
          <a href="#swap" class="nav-item">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M7 10l5-5 5 5M7 14l5 5 5-5" />
            </svg>
            <span>Swap</span>
          </a>
        </nav>

        <div class="sidebar-footer">
          <div class="status-indicator">
            <div class="status-dot"></div>
            <span id="sidebarStatus">Disconnected</span>
          </div>
        </div>
      </aside>

      <!-- Main Content -->
      <main class="main-content">
        <header class="top-bar">
          <div class="page-title">
            <h1>Dashboard</h1>
            <p>Manage your ERC20 tokens securely</p>
          </div>
          <div class="top-actions">
            <button id="connectWallet" class="btn-connect">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="3" y="7" width="18" height="14" rx="2" />
              </svg>
              Connect Wallet
            </button>
          </div>
        </header>

        <div class="content-grid">
          <!-- Wallet Info Panel -->
          <section class="panel wallet-panel" id="wallet">
            <div class="panel-header">
              <h2>Wallet Information</h2>
              <button id="disconnectWallet" class="btn-ghost btn-sm">Disconnect</button>
            </div>
            <div class="wallet-display">
              <div class="wallet-item">
                <div class="wallet-icon">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2" />
                    <circle cx="12" cy="7" r="4" />
                  </svg>
                </div>
                <div class="wallet-details">
                  <span class="wallet-label">Connected Address</span>
                  <span id="accountDisplay" class="wallet-value">Not connected</span>
                </div>
              </div>
              <div class="wallet-item">
                <div class="wallet-icon">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="10" />
                    <path d="M2 12h20M12 2a15.3 15.3 0 014 10 15.3 15.3 0 01-4 10 15.3 15.3 0 01-4-10 15.3 15.3 0 014-10z" />
                  </svg>
                </div>
                <div class="wallet-details">
                  <span class="wallet-label">Network</span>
                  <span id="networkDisplay" class="wallet-value">â€”</span>
                </div>
              </div>
            </div>
          </section>

          <!-- Token Details Panel -->
          <section class="panel" id="token">
            <div class="panel-header">
              <h2>Token Details</h2>
            </div>
            <div class="panel-body">
              <div class="input-group">
                <label>Contract Address</label>
                <input id="tokenAddress" type="text" placeholder="0x..." />
              </div>
              <button id="loadToken" class="btn-primary">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M21 12a9 9 0 11-6.219-8.56" />
                </svg>
                Load Token
              </button>
              <div id="tokenInfo" class="token-info-display"></div>
            </div>
          </section>

          <!-- Transfer Panel -->
          <section class="panel" id="transfer">
            <div class="panel-header">
              <h2>Transfer Tokens</h2>
            </div>
            <div class="panel-body">
              <div class="input-group">
                <label>Recipient Address</label>
                <input id="recipientAddress" type="text" placeholder="0x..." />
              </div>
              <div class="input-group">
                <label>Amount</label>
                <input id="transferAmount" type="number" min="0" step="any" placeholder="0.0" />
              </div>
              <button id="transferBtn" class="btn-primary">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M5 12h14M12 5l7 7-7 7" />
                </svg>
                Send Transfer
              </button>
            </div>
          </section>

          <!-- Allowance Panel -->
          <section class="panel panel-large" id="allowance">
            <div class="panel-header">
              <h2>Allowance Management</h2>
            </div>
            <div class="panel-body">
              <div class="tabs">
                <button class="tab-btn active" data-tab="view">View Allowances</button>
                <button class="tab-btn" data-tab="approve">Approve Spender</button>
              </div>

              <div class="tab-content active" data-content="view">
                <button id="checkAllowance" class="btn-secondary">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z" />
                    <circle cx="12" cy="12" r="3" />
                  </svg>
                  Check All Allowances
                </button>
                <div id="allowanceInfo" class="allowance-results"></div>
              </div>

              <div class="tab-content" data-content="approve">
                <div class="input-group">
                  <label>Spender Address</label>
                  <input id="spenderAddress" type="text" placeholder="0x..." />
                </div>
                <div class="input-group">
                  <label>Amount to Approve</label>
                  <input id="approveAmount" type="number" min="0" step="any" placeholder="0.0" />
                </div>
                <button id="approve" class="btn-primary">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M20 6L9 17l-5-5" />
                  </svg>
                  Approve Spender
                </button>
              </div>
            </div>
          </section>

          <!-- History Panel -->
          <section class="panel panel-large" id="history">
            <div class="panel-header">
              <h2>Transfer History</h2>
              <button id="refreshHistory" class="btn-ghost btn-sm">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0118.8-4.3M22 12.5a10 10 0 01-18.8 4.2" />
                </svg>
                Refresh
              </button>
            </div>
            <div class="panel-body">
              <span id="historyStatus" class="info-text"></span>
              <div id="transferHistory" class="history-list">
                <div class="empty-state">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M9 2v4M15 2v4M3 8h18M5 4h14a2 2 0 012 2v14a2 2 0 01-2 2H5a2 2 0 01-2-2V6a2 2 0 012-2z" />
                  </svg>
                  <p>Load a token and click refresh to see history</p>
                </div>
              </div>
            </div>
          </section>

          <!-- Status Panel -->
          <section class="panel status-panel">
            <div class="panel-header">
              <h2>System Status</h2>
            </div>
            <div class="panel-body">
              <pre id="status" class="status-log">Waiting for interaction...</pre>
            </div>
          </section>
        </div>
      </main>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/ethers/6.15.0/ethers.umd.min.js"></script>
    <script src="app.js"></script>
    <script>
      // Tab switching
      document.querySelectorAll('.tab-btn').forEach(btn => {
        btn.addEventListener('click', () => {
          const tab = btn.dataset.tab;
          document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
          document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
          btn.classList.add('active');
          document.querySelector(`[data-content="${tab}"]`).classList.add('active');
        });
      });
    </script>
  </body>
</html>